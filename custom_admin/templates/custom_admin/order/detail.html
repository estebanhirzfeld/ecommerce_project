{% extends "custom_admin/base.html" %}

{% block title %}Order #{{ order.id }} - Admin Panel{% endblock %}

{% block content %}
<div class="header">
    <h2>Order #{{ order.id }}</h2>
    <div style="display: flex; gap: 10px;">
        <a href="{% url 'custom_admin:admin_order_pdf' order.id %}" class="btn btn-secondary"
            style="background-color: #6c757d;">Export to PDF</a>
        <a href="{% url 'custom_admin:order_list' %}" class="btn btn-primary">Back to List</a>
    </div>
</div>

<div class="card">
    <h3>Customer Details</h3>
    <p><strong>Name:</strong> {{ order.first_name }} {{ order.last_name }}</p>
    <p><strong>Email:</strong> {{ order.email }}</p>
    <p><strong>Address:</strong> {{ order.address }}, {{ order.postal_code }} {{ order.city }}</p>
    <p><strong>Date:</strong> {{ order.created }}</p>
    <p><strong>Status:</strong>
        {% if order.paid %}
        <span style="color: var(--success); font-weight: bold;">Paid</span>
        {% else %}
        <span style="color: var(--danger); font-weight: bold;">Unpaid</span>
        {% endif %}
    </p>
</div>

<div class="card">
    <h3>Order Items</h3>
    <table>
        <thead>
            <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in order.items.all %}
            <tr>
                <td>{{ item.product.name }}</td>
                <td>${{ item.price }}</td>
                <td>{{ item.quantity }}</td>
                <td>${{ item.get_cost }}</td>
            </tr>
            {% endfor %}
            <tr>
                <td colspan="3" style="text-align: right; font-weight: bold;">Total Cost:</td>
                <td style="font-weight: bold;">${{ order.get_total_cost }}</td>
            </tr>
        </tbody>
    </table>
</div>

<div class="card">
    <h3>Actions</h3>
    <a href="{% url 'custom_admin:order_edit' order.id %}" class="btn btn-primary">Edit Order Status</a>
</div>
{% endblock %}